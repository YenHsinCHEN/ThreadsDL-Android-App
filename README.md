# ThreadsDL - Android Threads 影片下載器

這是一個基於 Android 平台開發的應用程式，專門用於下載社交軟體 Threads 上的影片。使用者只需複製 Threads 貼文的連結，貼到 App 中，即可解析並下載影片。所有功能均在手機本機端執行。

## ✨ 主要功能

- **精準連結解析**：透過內嵌 WebView 執行 JavaScript，能夠精準鎖定並解析目標 URL 的貼文，有效過濾掉推薦內容的干擾。
- **影片下載**：為每個解析出來的影片提供獨立的下載按鈕。
- **多媒體支援**：
  - 支援下載**單一影片**貼文。
  - 支援處理**多影片（輪播）**貼文，並以列表方式呈現所有影片及其對應的正確縮圖。
  - 能夠智能識別**圖片或純文字貼文**，並給予相應提示。
- **豐富資訊顯示**：
  - 顯示影片縮圖。
  - 顯示貼文作者的頭像、用戶名稱及貼文內容。
- **友善的使用者體驗**：
  - **防止重複下載**：已點擊下載的項目會有明確的視覺提示（圖示變更、變暗），並禁止再次點擊。
  - 支援深色與淺色模式。
  - 處理載入中的狀態，避免介面卡頓。
  - UI 自動適配系統狀態列。
  - 解決了重複解析同一 URL 時因快取而卡死的問題。

## 🛠️ 技術棧

- **語言**: Kotlin
- **架構**: 單一 Activity
- **核心技術**:
  - **WebView**: 作為 App 的核心，用於在內部完整渲染 Threads 的動態網頁，是繞過所有反爬蟲機制的關鍵。
  - **JavaScript Injection**: 透過注入自訂的 JavaScript 腳本，從網頁預先載入的 JSON「資料島 (Data Island)」中直接提取最原始、最乾淨的貼文資料。
  - **Gson**: 用於將從 JavaScript 回傳的複雜 JSON 字串，安全、高效地轉換為 Kotlin 的資料物件 (Data Class)。
  - **Glide**: 強大且高效的圖片載入函式庫，用於顯示影片縮圖和使用者頭像。
  - **RecyclerView**: 用於高效地展示多影片列表，並管理每個項目的獨立狀態。
  - **Kotlin Coroutines**: 用於在背景執行緒處理耗時的網路與解析任務，保持 UI 流暢。
  - **DownloadManager**: 使用 Android 系統內建的下載服務，進行穩定可靠的背景下載。

## 📝 使用方法

1.  打開 Threads App，找到您想下載的影片貼文。
2.  點擊分享按鈕，選擇「複製連結」。
3.  打開 ThreadsDL App。
4.  將連結貼入輸入框中。
5.  點擊「解析連結」按鈕。
6.  等待幾秒鐘，App 會顯示出影片的資訊。
7.  點擊您想下載的影片上的下載圖示即可。

## 🚀 未來展望 (待辦事項)

- [ ] **顯示影片時長**：
  - **挑戰**: 目前從「資料島」JSON 中無法直接獲取到影片的 `duration` 屬性。
  - **解決方案**: 需要採用**混合模式**。在透過資料島成功獲取到影片 URL 和縮圖後，讓 JavaScript 繼續在背景執行，等待 `<video>` 元素被實際渲染到畫面上，然後再讀取其 `duration` 屬性，並透過新的 JavaScript 橋樑方法將時長更新回 `RecyclerView` 對應的項目上。

## ⚠️ 免責聲明

- 本專案僅作為**學習與技術研究**用途。
- 下載的影片版權歸原作者所有。請尊重智慧財產權，**請勿將下載的內容用於任何商業用途或未經授權的二次分發**。