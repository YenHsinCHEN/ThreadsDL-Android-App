# ThreadsDL - Android Threads 影片下載器

這是一個基於 Android 平台開發的應用程式，專門用於下載社交軟體 Threads 上的影片。使用者只需複製 Threads 貼文的連結，貼到 App 中，即可解析並下載影片。所有功能均在手機本機端執行。

## ✨ 主要功能

- **精準連結解析**：透過內嵌 WebView 執行 JavaScript，能夠精準鎖定並解析目標 URL 的貼文，有效過濾掉推薦內容的干擾。
- **影片下載**：為每個解析出來的影片提供獨立的下載按鈕。
- **多媒體支援**：
  - 支援下載**單一影片**貼文。
  - 支援處理**多影片（輪播）**貼文，並以列表方式呈現所有影片及其對應的正確縮圖。
  - 能夠智能識別**圖片或純文字貼文**，並給予相應提示。
- **豐富資訊顯示**：
  - 顯示影片縮圖。
  - 顯示貼文作者的頭像、用戶名稱及貼文內容。
- **友善的使用者體驗**：
  - **防止重複下載**：已點擊下載的項目會有明確的視覺提示（縮圖與圖示變暗），並禁止再次點擊。
  - **優化的解析體驗**：採用最少 5 秒的等待視窗，確保流暢的用戶體驗，並設有超時機制防止永久等待。
  - **一鍵貼上**：提供貼上按鈕，簡化操作流程。
  - 支援深色與淺色模式。
  - UI 自動適配系統狀態列。

## 🛠️ 技術棧

- **語言**: Kotlin
- **架構**: 單一 Activity
- **核心技術**:
  - **WebView**: 作為 App 的核心，用於在內部完整渲染 Threads 的動態網頁，是繞過所有反爬蟲機制的關鍵。
  - **JavaScript Injection**: 透過注入自訂的 JavaScript 腳本，從網頁預先載入的 JSON「資料島 (Data Island)」中直接提取最原始、最乾淨的貼文資料。
  - **Gson**: 用於將從 JavaScript 回傳的複雜 JSON 字串，安全、高效地轉換為 Kotlin 的資料物件 (Data Class)。
  - **Glide**: 強大且高效的圖片載入函式庫，用於顯示影片縮圖和使用者頭像。
  - **RecyclerView**: 用於高效地展示多影片列表，並管理每個項目的獨立狀態。
  - **Kotlin Coroutines**: 用於實現非同步的解析視窗（最少 5 秒等待，最多 8 秒超時）。
  - **DownloadManager**: 使用 Android 系統內建的下載服務，進行穩定可靠的背景下載。

## 📝 使用方法

1.  打開 Threads App，找到您想下載的影片貼文。
2.  點擊分享按鈕，選擇「複製連結」。
3.  打開 ThreadsDL App。
4.  點擊「貼上」按鈕，或手動將連結貼入輸入框中。
5.  點擊「解析連結」按鈕。
6.  等待約 5 秒鐘，App 會顯示出影片的資訊。
7.  點擊您想下載的影片上的下載圖示即可。

## 🚀 未來展望 (待辦事項)

- [ ] **處理特殊貼文類型**：
  - **問題描述**: 目前發現一個特定的貼文無法成功解析，可能是其內部資料結構或媒體類型與常規貼文不同（例如，可能是混合了圖片與影片的輪播）。
  - **待處理連結**: https://www.threads.com/@chiayu.1128/post/DOkte-Yj8g9?xmt=AQF0cTRSkLw2zWvByZjc7GeiQOWCib155NNpUJ58dD7gLQ&slof=1
  - **解決方案**: 需要對此類貼文的「資料島」JSON 結構進行深入分析，以增強 App 的兼容性。

## ⚠️ 免責聲明

- 本專案僅作為**學習與技術研究**用途。
- 下載的影片版權歸原作者所有。請尊重智慧財產權，**請勿將下載的內容用於任何商業用途或未經授權的二次分發**。